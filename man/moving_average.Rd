% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/query.R
\name{moving_average}
\alias{moving_average}
\title{Calculate moving average of a value over time}
\usage{
moving_average(
  conn = NULL,
  table_name,
  value_column,
  time_column,
  window_size = 3,
  where_clause = NULL,
  debug = FALSE
)
}
\arguments{
\item{conn}{Database connection object (optional, uses global connection if NULL)}

\item{table_name}{Name of the table}

\item{value_column}{Name of the value column}

\item{time_column}{Name of the time column}

\item{window_size}{Size of the moving average window}

\item{where_clause}{Optional WHERE clause}

\item{debug}{Enable debug messages (optional, default FALSE)}
}
\value{
Moving average result as a data frame
}
\description{
Calculate moving average of a value over time
}
\examples{
\dontrun{
# Using global connection
init_connection(
  host = "localhost", 
  port = 5432, 
  db = "testdb", 
  user = "testuser", 
  pass = "testpass", 
  schema = "public"
)
ma <- moving_average(
  table_name = "sensor_data",
  value_column = "temperature",
  time_column = "timestamp",
  window_size = 5
)

# Weekly moving average
ma_weekly <- moving_average(
  table_name = "daily_metrics",
  value_column = "value",
  time_column = "date",
  window_size = 7,
  where_clause = "metric_type = 'temperature'"
)

# Or with explicit connection
conn <- get_connection()
ma <- moving_average(
  conn,
  "sensor_data",
  "temperature",
  "timestamp"
)
}
}
